const AWS = require('aws-sdk');
const SES = new AWS.SES();

module.exports.sendEmail = async (header, body, receiver, sender, replyBackTo = sender) => {

    const emailParams = {
        Source: sender,
        ReplyToAddresses: [replyBackTo],
        Destination: {
            ToAddresses: [receiver]
        },
        Message: {
            Body: {
                Text:{
                    Charset: 'UTF-8',
                    Data: body
                },
            },
            Subject: {
                Charset: 'UTF-8',
                Data: header
            }
        }

    }

    const promise = await SES.sendEmail(emailParams).promise()
    console.log("*************************** Email Sending: Done ************************************")
    return promise
}